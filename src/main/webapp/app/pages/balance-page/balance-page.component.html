<!-- Contenedor Wallet -->
<div class="row">
  <div class="col-12 col-sm-6 col-xl-4 mb-4 mx-auto">
    <div class="card border-0 shadow card-stats-size">
      <div class="card-body card-body-stats">
        <div class="row d-block d-xl-flex align-items-center">
          <div class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
            <div class="icon-stats icon-stats-secondary rounded-stats me-4 me-sm-0">
              <i class="fa fa-wallet icon-stats-size"></i>
            </div>
          </div>
          <div class="col-12 col-xl-7 px-xl-0">
            <div class="d-none d-sm-block">
              <h2 class="h6 text-green-subtitles pb-1">Créditos</h2>
              <h3 class="fw-extrabold mb-2">
                <img class="currency-icon me-1" src="https://i.ibb.co/WvsS812/appostado-currency.png" />{{ userInfo!.balance | number }}
              </h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- End Contenedor Wallet -->

<!-- Tabla Transacciones -->

<div class="col-md-12 mt-lg-5 mb-lg-4">
  <div class="card-header my-lg-2">
    <h5>Mis Transacciones</h5>

    <p-table
      #dt1
      [value]="transaccions"
      dataKey="id"
      [rows]="5"
      [showCurrentPageReport]="true"
      [rowsPerPageOptions]="[5, 10, 25]"
      [loading]="loading"
      styleClass="p-datatable-gridlines"
      [paginator]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [globalFilterFields]="['id', 'monto', 'tipo']"
    >
      <ng-template pTemplate="caption">
        <div class="flex">
          <button pButton label="Clear" class="p-button-outlined" icon="pi pi-filter-slash" (click)="clear(dt1)"></button>
          <span class="p-input-icon-left ml-auto">
            <i class="pi pi-search"></i>
            <input pInputText type="text" (input)="applyFilterGlobal($event, 'contains')" placeholder="Search keyword" />
          </span>
        </div>
      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th>
            <div class="flex justify-content-center align-items-center">
              ID
              <p-columnFilter type="text" field="id" display="menu"></p-columnFilter>
            </div>
          </th>
          <th>
            <div class="flex justify-content-center align-items-center">
              Monto
              <p-columnFilter type="text" field="monto" display="menu"></p-columnFilter>
            </div>
          </th>
          <th>
            <div class="flex justify-content-center align-items-center">
              Tipo
              <p-columnFilter
                field="tipo"
                matchMode="in"
                display="menu"
                [showMatchModes]="false"
                [showOperator]="false"
                [showAddButton]="false"
              >
                <ng-template pTemplate="header">
                  <div class="px-3 pt-3 pb-0">
                    <span class="font-bold">Selección de tipo</span>
                  </div>
                </ng-template>
                <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                  <p-multiSelect
                    [ngModel]="value"
                    [options]="tipos"
                    placeholder="Any"
                    (onChange)="filter($event.value)"
                    optionLabel="label"
                  >
                    <ng-template let-option pTemplate="item">
                      <div class="p-multiselect-tipo-option">
                        <span class="ml-1">{{ option.label }}</span>
                      </div>
                    </ng-template>
                  </p-multiSelect>
                </ng-template>
              </p-columnFilter>
            </div>
          </th>
          <th>
            <div class="flex justify-content-center align-items-center">Fecha</div>
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-transaccions>
        <tr>
          <td>
            {{ transaccions.id }}
          </td>
          <td>
            <span class="image-text">{{ transaccions.monto }}</span>
          </td>
          <td>
            <span class="image-text">{{ transaccions.tipo }}</span>
          </td>
          <td>
            {{ transaccions.fecha | date: 'MM/dd/yyyy' }}
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">No se encontraron transacciones.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
